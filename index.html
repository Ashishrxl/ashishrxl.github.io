<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenAI API Request</title>
</head>
<body>
    <h2>Chat with OpenAI</h2>
    <form id="apiForm">
        <label for="apiKey">API Key:</label>
        <input type="text" id="apiKey" required><br><br>

        <label for="userPrompt">Enter your message:</label>
        <input type="text" id="userPrompt" required><br><br>

        <button type="submit">Send Request</button>
    </form>

    <h3>Response:</h3>
    <pre id="responseOutput"></pre>

    <script>
        document.getElementById("apiForm").addEventListener("submit", async function(event) {
            event.preventDefault(); // Prevent form from reloading the page
            
            const apiKey = document.getElementById("apiKey").value.trim();
            const userPrompt = document.getElementById("userPrompt").value.trim();
            const responseOutput = document.getElementById("responseOutput");

            if (!apiKey || !userPrompt) {
                responseOutput.textContent = "API Key and prompt are required!";
                return;
            }

            try {
                const response = await fetch("https://api.openai.com/v1/completions", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                        "Authorization": `Bearer ${apiKey}`
                    },
                    body: JSON.stringify({
                        model: "gpt-3.5-turbo",
                        messages: [{ role: "user", content: userPrompt }]
                    })
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    responseOutput.textContent = `Error ${response.status}: ${errorData.error?.message || "Unknown error"}`;
                    return;
                }

                const data = await response.json();
                responseOutput.textContent = data.choices[0]?.message?.content || "No response from AI.";
            } catch (error) {
                responseOutput.textContent = "Request failed: " + error.message;
            }
        });
    </script>
</body>
</html>